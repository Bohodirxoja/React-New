{"ast":null,"code":"var _jsxFileName = \"E:\\\\ishlar\\\\app-dostlikdon-new\\\\src\\\\components\\\\AdminNews.js\";\nimport React, { Component } from 'react';\nimport AdminLayout from \"./AdminLayout\";\nimport { Button, Modal, ModalBody, ModalFooter } from 'reactstrap';\nimport { connect } from \"react-redux\";\nimport { addNews, deleteNews, getNews, saveFile, updateState } from \"../redux/actions/adminNewsAction\";\nimport { AvForm, AvField } from 'availity-reactstrap-validation';\nimport { API_PATH } from \"../tools/constants\";\nimport { getSubMenus } from \"../redux/actions/adminMenuAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AdminNews extends Component {\n  componentDidMount() {\n    this.props.getSubMenus();\n    this.props.getNews();\n  }\n\n  render() {\n    const changeModal = () => {\n      this.props.updateState({\n        modalOpen: !this.props.modalOpen\n      });\n    };\n\n    const savePhoto = e => {\n      console.log(e.target.files[0]);\n      this.props.saveFile(e.target.files[0]);\n    };\n\n    const saveNews = (event, values) => {\n      this.props.addNews({ ...values,\n        photo: this.props.selectedImage\n      });\n    };\n\n    const generateUrl = text => text.toLowerCase().replace(/ /g, '-').replace(/[^\\w-]+/g, '');\n\n    const changeUrl = e => {\n      this.props.updateState({\n        generatedUrl: generateUrl(e.target.value)\n      });\n    };\n\n    const editNews = data => {\n      this.props.updateState({\n        selectedNews: data,\n        selectedImage: data.photo.id\n      });\n      changeModal();\n    };\n\n    const changeDeleteModal = () => {\n      this.props.updateState({\n        deleteModalOpen: !this.props.deleteModalOpen\n      });\n    };\n\n    const deleteItem = data => {\n      this.props.updateState({\n        selectedIdForDelete: data.id\n      });\n      changeDeleteModal();\n    };\n\n    return /*#__PURE__*/_jsxDEV(AdminLayout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-news\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"News\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 30\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"button\",\n              color: \"success\",\n              onClick: changeModal,\n              children: \"Qo'shish\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-striped table-hover mt-3 table-bordered\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Title (uz)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Description (uz)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Url\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Menu\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.props.news.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.titleUz\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.descriptionUz\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.url\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.menu.nameUz\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-primary mr-2\",\n                  onClick: () => editNews(item),\n                  children: \"E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-danger\",\n                  onClick: () => deleteItem(item),\n                  children: \"D\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 29\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          isOpen: this.props.modalOpen,\n          toggle: () => {\n            this.props.updateState({\n              selectedNews: {},\n              selectedImage: \"\"\n            });\n            changeModal();\n          },\n          children: /*#__PURE__*/_jsxDEV(AvForm, {\n            onValidSubmit: saveNews,\n            model: this.props.selectedNews,\n            children: [/*#__PURE__*/_jsxDEV(ModalBody, {\n              children: [this.props.selectedNews.id ? /*#__PURE__*/_jsxDEV(AvField, {\n                name: \"id\",\n                value: this.props.selectedNews.id,\n                className: \"d-none\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 37\n              }, this) : \"\", /*#__PURE__*/_jsxDEV(AvField, {\n                name: \"titleUz\",\n                type: \"text\",\n                label: \"News title (uz)\",\n                required: true,\n                onChange: changeUrl\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                name: \"titleRu\",\n                type: \"text\",\n                label: \"News title (ru)\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                name: \"titleEn\",\n                type: \"text\",\n                label: \"News title (en)\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                name: \"descriptionUz\",\n                type: \"textarea\",\n                label: \"Description (uz)\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                name: \"descriptionRu\",\n                type: \"textarea\",\n                label: \"Description (ru)\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                name: \"descriptionEn\",\n                type: \"textarea\",\n                label: \"Description (en)\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                type: \"select\",\n                name: \"menu\",\n                label: \"Menu\",\n                children: this.props.subMenus.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: item.id,\n                  children: item.nameUz\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                name: \"url\",\n                label: \"Url\",\n                value: this.props.generatedUrl\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"file\",\n                children: \"Yangilik uchun rasm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                id: \"file\",\n                onChange: savePhoto,\n                className: \"form-control\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this), this.props.selectedImage.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"position-relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: API_PATH + \"file/get/\" + this.props.selectedImage,\n                  alt: \"\",\n                  className: \"w-100 mt-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"close delete-image\",\n                  onClick: () => this.props.updateState({\n                    selectedImage: \"\"\n                  }),\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 37\n              }, this) : \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-success\",\n                children: \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-secondary\",\n                onClick: () => {\n                  this.props.updateState({\n                    selectedNews: {},\n                    selectedImage: \"\"\n                  });\n                  changeModal();\n                },\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          isOpen: this.props.deleteModalOpen,\n          toggle: changeDeleteModal,\n          children: [/*#__PURE__*/_jsxDEV(ModalBody, {\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Rostdan ham o'chirmoqchimisiz?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-danger\",\n              onClick: () => {\n                this.props.deleteNews(this.props.selectedIdForDelete);\n              },\n              children: \"Ha\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-secondary\",\n              onClick: changeDeleteModal,\n              children: \"Yo'q\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    modalOpen: state.news.modalOpen,\n    selectedImage: state.news.selectedImage,\n    generatedUrl: state.news.generatedUrl,\n    subMenus: state.news.subMenus,\n    news: state.news.news,\n    selectedNews: state.news.selectedNews,\n    deleteModalOpen: state.news.deleteModalOpen,\n    selectedIdForDelete: state.news.selectedIdForDelete\n  };\n};\n\nexport default connect(mapStateToProps, {\n  updateState,\n  saveFile,\n  getSubMenus,\n  addNews,\n  getNews,\n  deleteNews\n})(AdminNews);","map":{"version":3,"sources":["E:/ishlar/app-dostlikdon-new/src/components/AdminNews.js"],"names":["React","Component","AdminLayout","Button","Modal","ModalBody","ModalFooter","connect","addNews","deleteNews","getNews","saveFile","updateState","AvForm","AvField","API_PATH","getSubMenus","AdminNews","componentDidMount","props","render","changeModal","modalOpen","savePhoto","e","console","log","target","files","saveNews","event","values","photo","selectedImage","generateUrl","text","toLowerCase","replace","changeUrl","generatedUrl","value","editNews","data","selectedNews","id","changeDeleteModal","deleteModalOpen","deleteItem","selectedIdForDelete","news","map","item","titleUz","descriptionUz","url","menu","nameUz","subMenus","length","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport AdminLayout from \"./AdminLayout\";\r\nimport {Button, Modal, ModalBody, ModalFooter} from 'reactstrap';\r\nimport {connect} from \"react-redux\";\r\nimport {addNews, deleteNews, getNews, saveFile, updateState} from \"../redux/actions/adminNewsAction\";\r\nimport {AvForm, AvField} from 'availity-reactstrap-validation';\r\nimport {API_PATH} from \"../tools/constants\";\r\nimport {getSubMenus} from \"../redux/actions/adminMenuAction\";\r\n\r\nclass AdminNews extends Component {\r\n\r\n    componentDidMount() {\r\n        this.props.getSubMenus();\r\n        this.props.getNews();\r\n    }\r\n\r\n    render() {\r\n        const changeModal = () => {\r\n            this.props.updateState({modalOpen: !this.props.modalOpen})\r\n        }\r\n\r\n        const savePhoto = (e) => {\r\n            console.log(e.target.files[0])\r\n            this.props.saveFile(e.target.files[0]);\r\n        }\r\n\r\n        const saveNews = (event, values) => {\r\n            this.props.addNews({...values, photo: this.props.selectedImage});\r\n        }\r\n\r\n        const generateUrl = (text) => text.toLowerCase().replace(/ /g, '-').replace(/[^\\w-]+/g, '');\r\n\r\n        const changeUrl = (e) => {\r\n            this.props.updateState({generatedUrl : generateUrl(e.target.value)});\r\n        }\r\n\r\n        const editNews = (data) =>{\r\n            this.props.updateState({selectedNews: data, selectedImage: data.photo.id});\r\n            changeModal();\r\n        }\r\n\r\n        const changeDeleteModal = () => {\r\n            this.props.updateState({deleteModalOpen: !this.props.deleteModalOpen})\r\n        }\r\n\r\n        const deleteItem = (data) => {\r\n            this.props.updateState({selectedIdForDelete: data.id});\r\n            changeDeleteModal();\r\n        }\r\n\r\n        return (\r\n            <AdminLayout>\r\n                <div className='admin-news'>\r\n                    <div className=\"d-flex justify-content-between\">\r\n                        <div><h5>News</h5></div>\r\n                        <div>\r\n                            <Button type='button' color='success' onClick={changeModal}>Qo'shish</Button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <table className='table table-striped table-hover mt-3 table-bordered'>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Title (uz)</th>\r\n                            <th>Description (uz)</th>\r\n                            <th>Url</th>\r\n                            <th>Menu</th>\r\n                            <th>Action</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {this.props.news.map(item => (\r\n                            <tr>\r\n                                <td>{item.titleUz}</td>\r\n                                <td>{item.descriptionUz}</td>\r\n                                <td>{item.url}</td>\r\n                                <td>{item.menu.nameUz}</td>\r\n                                <td>\r\n                                    <button type='button' className='btn btn-primary mr-2' onClick={() => editNews(item)}>E</button>\r\n                                    <button type='button' className='btn btn-danger' onClick={() => deleteItem(item)}>D</button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                        </tbody>\r\n                    </table>\r\n                    <Modal isOpen={this.props.modalOpen} toggle={() => {this.props.updateState({selectedNews: {}, selectedImage: \"\"}); changeModal()}}>\r\n                        <AvForm onValidSubmit={saveNews} model={this.props.selectedNews}>\r\n                            <ModalBody>\r\n                                {this.props.selectedNews.id ?\r\n                                    <AvField name=\"id\" value={this.props.selectedNews.id} className=\"d-none\"/>\r\n                                    : \"\"\r\n                                }\r\n                                <AvField\r\n                                    name=\"titleUz\"\r\n                                    type=\"text\"\r\n                                    label=\"News title (uz)\"\r\n                                    required\r\n                                    onChange={changeUrl}\r\n                                />\r\n                                <AvField\r\n                                    name=\"titleRu\"\r\n                                    type=\"text\"\r\n                                    label=\"News title (ru)\"\r\n                                    required\r\n                                />\r\n\r\n                                <AvField\r\n                                    name=\"titleEn\"\r\n                                    type=\"text\"\r\n                                    label=\"News title (en)\"\r\n                                    required\r\n                                />\r\n\r\n\r\n                                <AvField\r\n                                    name=\"descriptionUz\"\r\n                                    type=\"textarea\"\r\n                                    label=\"Description (uz)\"\r\n                                    required\r\n                                />\r\n\r\n                                <AvField\r\n                                    name=\"descriptionRu\"\r\n                                    type=\"textarea\"\r\n                                    label=\"Description (ru)\"\r\n                                    required\r\n                                />\r\n\r\n                                <AvField\r\n                                    name=\"descriptionEn\"\r\n                                    type=\"textarea\"\r\n                                    label=\"Description (en)\"\r\n                                    required\r\n                                />\r\n\r\n                                <AvField type=\"select\" name=\"menu\" label=\"Menu\">\r\n                                    {this.props.subMenus.map(item => (\r\n                                        <option value={item.id}>{item.nameUz}</option>\r\n                                    ))}\r\n                                </AvField>\r\n\r\n                                <AvField name=\"url\" label=\"Url\" value={this.props.generatedUrl}/>\r\n\r\n                                <label htmlFor=\"file\">Yangilik uchun rasm</label>\r\n                                <input type=\"file\" id=\"file\" onChange={savePhoto} className=\"form-control\"/>\r\n\r\n                                {this.props.selectedImage.length > 0 ?\r\n                                    <div className='position-relative'>\r\n                                        <img src={API_PATH + \"file/get/\" + this.props.selectedImage} alt=\"\" className=\"w-100 mt-3\"/>\r\n\r\n                                        <button type='button' className='close delete-image' onClick={() => this.props.updateState({selectedImage: \"\"})}>&times;</button>\r\n                                    </div> : \"\"\r\n                                }\r\n\r\n                            </ModalBody>\r\n                            <ModalFooter>\r\n                                <button type='submit' className='btn btn-success'>Add</button>\r\n                                <button type='button' className='btn btn-secondary' onClick={() => {this.props.updateState({selectedNews: {}, selectedImage: \"\"}); changeModal()}}>Cancel</button>\r\n                            </ModalFooter>\r\n                        </AvForm>\r\n                    </Modal>\r\n\r\n                    <Modal isOpen={this.props.deleteModalOpen} toggle={changeDeleteModal}>\r\n                        <ModalBody>\r\n                            <h5>Rostdan ham o'chirmoqchimisiz?</h5>\r\n                        </ModalBody>\r\n                        <ModalFooter>\r\n                            <button type='button' className='btn btn-danger' onClick={() => {this.props.deleteNews(this.props.selectedIdForDelete)}}>Ha</button>\r\n                            <button type='button' className='btn btn-secondary' onClick={changeDeleteModal}>Yo'q</button>\r\n                        </ModalFooter>\r\n                    </Modal>\r\n                </div>\r\n            </AdminLayout>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        modalOpen: state.news.modalOpen,\r\n        selectedImage: state.news.selectedImage,\r\n        generatedUrl: state.news.generatedUrl,\r\n        subMenus: state.news.subMenus,\r\n        news: state.news.news,\r\n        selectedNews: state.news.selectedNews,\r\n        deleteModalOpen: state.news.deleteModalOpen,\r\n        selectedIdForDelete: state.news.selectedIdForDelete\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {updateState, saveFile, getSubMenus, addNews, getNews, deleteNews})(AdminNews);"]},"metadata":{},"sourceType":"module"}